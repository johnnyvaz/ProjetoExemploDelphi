/******************************************************************************/
/****        Generated by IBExpert 2015.12.21.1 12/09/2018 13:03:53        ****/
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES WIN1252;

SET CLIENTLIB 'fbclient.dll';

CREATE DATABASE 'localhost:C:\Users\johnn\Documents\WORKSPACE\DELPHI\AvaliacaoAndes\database\dados.fdb'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 8192
DEFAULT CHARACTER SET WIN1252 COLLATION WIN1252;



/******************************************************************************/
/****                              Generators                              ****/
/******************************************************************************/

CREATE GENERATOR GEN_CLIENTE_ID;
SET GENERATOR GEN_CLIENTE_ID TO 0;

CREATE GENERATOR GEN_ITEM_ID;
SET GENERATOR GEN_ITEM_ID TO 0;

CREATE GENERATOR GEN_PEDIDO_ID;
SET GENERATOR GEN_PEDIDO_ID TO 0;

CREATE GENERATOR GEN_PRODUTO_ID;
SET GENERATOR GEN_PRODUTO_ID TO 0;



/******************************************************************************/
/****                                Tables                                ****/
/******************************************************************************/



CREATE TABLE CLIENTE (
    ID          INTEGER NOT NULL,
    NOME        VARCHAR(50),
    LOGRADOURO  VARCHAR(50),
    NUMERO      INTEGER,
    BAIRRO      VARCHAR(50),
    CIDADE      VARCHAR(50),
    ESTADO      VARCHAR(50),
    CEP         VARCHAR(8),
    TELEFONE    VARCHAR(10),
    CELULAR     VARCHAR(50)
);

CREATE TABLE ITEM (
    ID             INTEGER NOT NULL,
    IDPEDIDO       INTEGER NOT NULL,
    IDPRODUTO      INTEGER NOT NULL,
    PRODUTO        VARCHAR(50) CHARACTER SET NONE,
    QUANTIDADE     INTEGER,
    VALORUNITARIO  NUMERIC(9,2),
    TOTAL          NUMERIC(9,2)
);

CREATE TABLE PEDIDO (
    ID            INTEGER NOT NULL,
    IDCLIENTE     SMALLINT,
    CLIENTE       VARCHAR(50) CHARACTER SET NONE,
    EMISSAO       DATE,
    OBSERVACAO    VARCHAR(50) CHARACTER SET NONE,
    DESCONTO      NUMERIC(9,2),
    TOTAL         NUMERIC(9,2),
    TOTALLIQUIDO  NUMERIC(9,2)
);

CREATE TABLE PRODUTO (
    ID         INTEGER NOT NULL,
    DESCRICAO  VARCHAR(50) CHARACTER SET NONE,
    PRECO      NUMERIC(9,2)
);



/******************************************************************************/
/****                             Primary keys                             ****/
/******************************************************************************/

ALTER TABLE CLIENTE ADD CONSTRAINT PK_CLIENTE PRIMARY KEY (ID);
ALTER TABLE ITEM ADD CONSTRAINT PK_ITEM PRIMARY KEY (ID);
ALTER TABLE PEDIDO ADD CONSTRAINT PK_PEDIDO PRIMARY KEY (ID);
ALTER TABLE PRODUTO ADD CONSTRAINT PK_PRODUTO PRIMARY KEY (ID);


/******************************************************************************/
/****                             Foreign keys                             ****/
/******************************************************************************/

ALTER TABLE ITEM ADD CONSTRAINT FK_ITEM_1 FOREIGN KEY (IDPEDIDO) REFERENCES PEDIDO (ID);
ALTER TABLE ITEM ADD CONSTRAINT FK_ITEM_2 FOREIGN KEY (IDPRODUTO) REFERENCES PRODUTO (ID);
ALTER TABLE PEDIDO ADD CONSTRAINT FK_PEDIDO_1 FOREIGN KEY (IDCLIENTE) REFERENCES CLIENTE (ID);
